'use client';

import { useState } from 'react';
import Link from 'next/link';
import { sendPentestFormEmail } from '@/utils/email';

export default function PentestPage() {
  return (
    <div className="bg-black text-white">
      {/* Hero Section */}
      <section className="relative overflow-hidden py-20 sm:py-28 lg:py-32">
        <div className="absolute inset-0 opacity-10">
          <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black"></div>
          <div className="absolute inset-0" style={{
            backgroundImage: `
              linear-gradient(rgba(132, 204, 22, 0.07) 1px, transparent 1px),
              linear-gradient(90deg, rgba(132, 204, 22, 0.07) 1px, transparent 1px)
            `,
            backgroundSize: '40px 40px'
          }} />
        </div>

        <div className="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 relative z-10">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            {/* Left Content */}
            <div className="text-center lg:text-left">
              <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tighter mb-6">
                Expert-Level Pentesting.
                <br />
                <span className="text-lime-400">On Demand.</span>
              </h1>
              <p className="max-w-md mx-auto lg:mx-0 text-lg text-gray-400 mb-8">
                Compliance-ready reports when you need them, now accessible to every business.
              </p>
              <Link
                href="/configure"
                className="inline-block px-8 py-3 bg-lime-400 text-black rounded-lg font-semibold hover:bg-lime-300 transition-all duration-300"
              >
                Configure Now
              </Link>
            </div>

            {/* Right Content - Testimonial */}
            <div className="relative">
              <div className="absolute -inset-2 bg-gradient-to-r from-lime-400/20 to-gray-800/20 rounded-2xl blur opacity-50"></div>
              <div className="relative bg-gray-900/80 backdrop-blur-md rounded-2xl p-8 border border-gray-800/50 shadow-2xl">
                <div className="flex items-center mb-4">
                  {/* Bloompath Logo Placeholder */}
                  <svg className="w-6 h-6 mr-3 text-lime-400" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-2.172 4.243a1 1 0 111.414 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zm2.172 4.243l.707.707a1 1 0 101.414-1.414l-.707-.707a1 1 0 00-1.414 1.414z" />
                  </svg>
                  <h3 className="text-xl font-semibold text-white">HashX</h3>
                </div>
                <blockquote className="text-gray-300 italic mb-6">
                  "What normally takes weeks of coordination took just days with SECURIZE. We had findings, fixes deployed, and our SOC2 report submitted faster than we thought possible."
                </blockquote>
                <div className="flex items-center justify-between">
                  <div>
                    <p className="font-semibold text-white">Avishka Bandara</p>
                    <p className="text-sm text-gray-400">Founder & CEO of HashX</p>
                  </div>
                  <Link
                    href="/story/bloompath"
                    className="text-lime-400 hover:text-lime-300 font-medium underline transition-colors"
                  >
                    Read the full story
                  </Link>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* What You'll Get Section */}
      <section className="relative overflow-hidden bg-black py-20 sm:py-28 lg:py-32">
        <div className="absolute inset-0 opacity-10">
          <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black"></div>
          <div className="absolute inset-0" style={{
            backgroundImage: `
              linear-gradient(rgba(132, 204, 22, 0.07) 1px, transparent 1px),
              linear-gradient(90deg, rgba(132, 204, 22, 0.07) 1px, transparent 1px)
            `,
            backgroundSize: '40px 40px'
          }} />
        </div>
        <div className="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 relative z-10">
          <div className="text-center mb-16">
            <h2 className="text-3xl sm:text-4xl lg:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-b from-white to-gray-400">
              What You'll Get
            </h2>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {/* Feature 1 */}
            <div className="bg-gray-900/80 backdrop-blur-md rounded-2xl p-8 border border-gray-800/50 transition-all duration-300 hover:border-lime-400/50 hover:bg-gray-900">
              <div className="flex flex-col items-start h-full">
                <div className="w-12 h-12 rounded-lg bg-gray-800 flex items-center justify-center mb-4">
                  <svg className="w-6 h-6 text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
                <h3 className="text-lg font-semibold text-white mb-2">Comprehensive Testing</h3>
                <p className="text-gray-400 text-sm">
                  Comprehensive web application penetration testing with expert-level findings.
                </p>
              </div>
            </div>
            {/* Feature 2 */}
            <div className="bg-gray-900/80 backdrop-blur-md rounded-2xl p-8 border border-gray-800/50 transition-all duration-300 hover:border-lime-400/50 hover:bg-gray-900">
              <div className="flex flex-col items-start h-full">
                <div className="w-12 h-12 rounded-lg bg-gray-800 flex items-center justify-center mb-4">
                  <svg className="w-6 h-6 text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                </div>
                <h3 className="text-lg font-semibold text-white mb-2">Compliance-Ready Documentation</h3>
                <p className="text-gray-400 text-sm">
                  Pentesting documentation designed for compliance audits and board presentations.
                </p>
              </div>
            </div>
            {/* Feature 3 */}
            <div className="bg-gray-900/80 backdrop-blur-md rounded-2xl p-8 border border-gray-800/50 transition-all duration-300 hover:border-lime-400/50 hover:bg-gray-900">
              <div className="flex flex-col items-start h-full">
                <div className="w-12 h-12 rounded-lg bg-gray-800 flex items-center justify-center mb-4">
                  <svg className="w-6 h-6 text-lime-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m12 0a2 2 0 100-4m0 4a2 2 0 110-4" />
                  </svg>
                </div>
                <h3 className="text-lg font-semibold text-white mb-2">Actionable Remediation</h3>
                <p className="text-gray-400 text-sm">
                  Detailed proof-of-concept exploits and actionable remediation steps.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* How it Works Section */}
      <HowItWorksSection />

      {/* Form Section */}
      <PentestFormSection />

      {/* FAQ Section */}
      <FAQSection />
    </div>
  );
}

function PentestFormSection() {
  const [formData, setFormData] = useState({
    firstName: '',
    lastName: '',
    company: '',
    companyEmail: '',
    billingAddress: '',
    companyBillingEmail: '',
    targetUrl: '',
    applicationName: '',
  });

  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitStatus, setSubmitStatus] = useState<{
    type: 'success' | 'error' | null;
    message: string;
  }>({ type: null, message: '' });

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value,
    }));
    // Clear status when user starts typing
    if (submitStatus.type) {
      setSubmitStatus({ type: null, message: '' });
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);
    setSubmitStatus({ type: null, message: '' });

    try {
      await sendPentestFormEmail(formData);
      setSubmitStatus({
        type: 'success',
        message: 'Thank you! Your pentest request has been submitted successfully. We will contact you shortly with next steps.',
      });
      // Reset form
      setFormData({
        firstName: '',
        lastName: '',
        company: '',
        companyEmail: '',
        billingAddress: '',
        companyBillingEmail: '',
        targetUrl: '',
        applicationName: '',
      });
    } catch (error: any) {
      setSubmitStatus({
        type: 'error',
        message: error.message || 'Failed to submit your request. Please try again or contact us directly.',
      });
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <section className="relative overflow-hidden bg-black py-20 sm:py-28 lg:py-32">
      <div className="absolute inset-0 opacity-10">
        <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black"></div>
        <div className="absolute inset-0" style={{
          backgroundImage: `
            linear-gradient(rgba(132, 204, 22, 0.07) 1px, transparent 1px),
            linear-gradient(90deg, rgba(132, 204, 22, 0.07) 1px, transparent 1px)
          `,
          backgroundSize: '40px 40px'
        }} />
      </div>
      <div className="container mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 relative z-10">
          <div className="text-center mb-12">
          <h2 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4">
              Start Your <span className="text-lime-400">Pentest</span>
            </h2>
          <p className="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">
            Complete the form below to initiate your penetration testing request. Our team will review your submission and contact you within 24 hours to discuss next steps and finalize your configuration.
            </p>
          </div>

        <div className="relative">
          <div className="absolute -inset-1 bg-gradient-to-r from-lime-400/20 to-gray-800/20 rounded-2xl blur opacity-50"></div>
          <div className="relative bg-gray-900/90 backdrop-blur-md rounded-2xl p-8 sm:p-10 border border-gray-800/50 shadow-2xl">
            {submitStatus.type && (
              <div className={`mb-6 p-4 rounded-lg border ${
                submitStatus.type === 'success'
                  ? 'bg-lime-400/10 border-lime-400/30 text-lime-400'
                  : 'bg-red-400/10 border-red-400/30 text-red-400'
              }`}>
                <div className="flex items-start">
                  {submitStatus.type === 'success' ? (
                    <svg className="w-5 h-5 mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  ) : (
                    <svg className="w-5 h-5 mr-3 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  )}
                  <p className="text-sm">{submitStatus.message}</p>
                </div>
              </div>
            )}

            <form onSubmit={handleSubmit} className="space-y-6">
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <div>
                  <label htmlFor="firstName" className="block text-sm font-semibold text-gray-300 mb-2">
                    First Name <span className="text-lime-400">*</span>
                  </label>
                  <input
                    type="text"
                    id="firstName"
                    name="firstName"
                    value={formData.firstName}
                    onChange={handleChange}
                    required
                    className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                    placeholder="John"
                  />
                </div>
                <div>
                  <label htmlFor="lastName" className="block text-sm font-semibold text-gray-300 mb-2">
                    Last Name <span className="text-lime-400">*</span>
                  </label>
                  <input
                    type="text"
                    id="lastName"
                    name="lastName"
                    value={formData.lastName}
                    onChange={handleChange}
                    required
                    className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                    placeholder="Doe"
                  />
                </div>
              </div>

              <div>
                <label htmlFor="company" className="block text-sm font-semibold text-gray-300 mb-2">
                  Company Name <span className="text-lime-400">*</span>
                </label>
                <input
                  type="text"
                  id="company"
                  name="company"
                  value={formData.company}
                  onChange={handleChange}
                  required
                  className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                  placeholder="Acme Corporation"
                />
              </div>

              <div>
                <label htmlFor="companyEmail" className="block text-sm font-semibold text-gray-300 mb-2">
                  Company Email <span className="text-lime-400">*</span>
                </label>
                <input
                  type="email"
                  id="companyEmail"
                  name="companyEmail"
                  value={formData.companyEmail}
                  onChange={handleChange}
                  required
                  className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                  placeholder="contact@company.com"
                />
              </div>

            <div>
                <label htmlFor="billingAddress" className="block text-sm font-semibold text-gray-300 mb-2">
                  Billing Address <span className="text-lime-400">*</span>
                </label>
                <textarea
                  id="billingAddress"
                  name="billingAddress"
                  value={formData.billingAddress}
                  onChange={handleChange}
                  rows={4}
                  required
                  className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all resize-none"
                  placeholder="123 Business Street, Suite 100&#10;City, State ZIP Code&#10;Country"
                />
            </div>

            <div>
                <label htmlFor="companyBillingEmail" className="block text-sm font-semibold text-gray-300 mb-2">
                  Billing Email <span className="text-lime-400">*</span>
                </label>
                <input
                  type="email"
                  id="companyBillingEmail"
                  name="companyBillingEmail"
                  value={formData.companyBillingEmail}
                  onChange={handleChange}
                  required
                  className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                  placeholder="billing@company.com"
                />
            </div>

            <div>
                <label htmlFor="targetUrl" className="block text-sm font-semibold text-gray-300 mb-2">
                  Target URL <span className="text-lime-400">*</span>
                </label>
                <input
                  type="url"
                  id="targetUrl"
                  name="targetUrl"
                  value={formData.targetUrl}
                  onChange={handleChange}
                  required
                  className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                  placeholder="https://example.com"
                />
                <p className="mt-2 text-xs text-gray-500 leading-relaxed">
                  <span className="font-semibold text-gray-400">Important:</span> The target URL cannot be modified after submission. Please ensure it is publicly accessible or that our IP addresses are whitelisted before submitting. <Link href="/faq" className="text-lime-400 hover:text-lime-300 underline">View FAQ</Link> for more information.
                </p>
            </div>

            <div>
                <label htmlFor="applicationName" className="block text-sm font-semibold text-gray-300 mb-2">
                  Application Name <span className="text-lime-400">*</span>
                </label>
                <input
                  type="text"
                  id="applicationName"
                  name="applicationName"
                  value={formData.applicationName}
                  onChange={handleChange}
                  required
                  className="w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400/50 focus:border-lime-400 transition-all"
                  placeholder="My Web Application"
                />
            </div>

              <div className="pt-6">
                <button
                  type="submit"
                  disabled={isSubmitting}
                  className="w-full px-8 py-4 bg-lime-400 text-black rounded-lg font-semibold hover:bg-lime-300 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-lime-400/20 hover:shadow-lime-400/30"
                >
                  {isSubmitting ? (
                    <>
                      <svg className="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                      <span>Submitting...</span>
                    </>
                  ) : (
                    <>
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      <span>Submit Pentest Request</span>
                    </>
                  )}
                </button>
                <p className="mt-4 text-xs text-center text-gray-500">
                  By submitting this form, you agree to our terms of service and privacy policy. All information provided will be kept confidential.
              </p>
            </div>
            </form>
          </div>
        </div>
      </div>
    </section>
  );
}

function FAQSection() {
  const [openIndex, setOpenIndex] = useState<number | null>(null);

  const faqs = [
    {
      question: "What do I need to prepare before testing?",
      answer: "Before starting your pentest with SECURIZE, ensure your target URL is publicly accessible or that our IP addresses are whitelisted. You'll need to provide test credentials for deeper coverage if you want authenticated testing. Our AI engine can work with just a URL, but authenticated access provides more comprehensive results. Make sure your application is in a stable state and not undergoing major updates during the testing period."
    },
    {
      question: "Is this suitable for compliance requirements like SOC2?",
      answer: "Yes, absolutely. SECURIZE's AI-powered pentesting generates compliance-ready documentation designed specifically for audits like SOC2, ISO 27001, PCI DSS, and HIPAA. Our reports include detailed findings, risk assessments, and remediation steps that meet auditor requirements. Many organizations use our reports directly in their compliance submissions, and we provide executive summaries suitable for board presentations."
    },
    {
      question: "How fast will I get my report and how much does it cost?",
      answer: "SECURIZE delivers comprehensive pentest reports in days, not weeks. Our AI engine runs thousands of security checks validated by expert pentesters, typically completing assessments within 3-5 business days. Pricing is transparent and scales with your needs - contact us for a custom quote based on your application size and complexity. We offer competitive rates that are significantly more affordable than traditional manual pentesting while maintaining expert-level quality."
    },
    {
      question: "What applications does SECURIZE support?",
      answer: "SECURIZE supports a wide range of web applications including REST APIs, GraphQL endpoints, traditional web applications, and modern SPAs (Single Page Applications). Our AI engine is trained on thousands of vulnerability patterns and can test applications built with any technology stack - from legacy systems to cutting-edge frameworks. We support testing of web applications, mobile app backends, and cloud-native applications."
    },
    {
      question: "How does SECURIZE's quality compare to manual pentesting?",
      answer: "SECURIZE combines the speed and consistency of AI with the validation of expert pentesters. Our AI engine performs thousands of checks that would take weeks for manual testers, while our security experts validate findings and provide context. This hybrid approach delivers expert-level results faster and more consistently than traditional manual pentesting. Our reports include detailed proof-of-concept exploits, CVSS scoring, and actionable remediation steps that match or exceed manual pentest quality standards."
    },
    {
      question: "Can I modify my target URL after submission?",
      answer: "No, the target URL cannot be modified after submission. This ensures testing integrity and prevents confusion during the assessment process. Please verify that your URL is correct, publicly accessible, or that our IP addresses are whitelisted before submitting. If you need to change the target, you'll need to submit a new request."
    },
    {
      question: "What happens after I submit the form?",
      answer: "After you submit your pentest request, our team will review your submission within 24 hours. We'll contact you via the email addresses you provided to confirm details, discuss testing scope, and finalize your configuration. Once approved, our AI engine will begin comprehensive security testing. You'll receive regular updates and can expect your final report within 3-5 business days, complete with findings, risk assessments, and remediation guidance."
    },
    {
      question: "What types of vulnerabilities does SECURIZE detect?",
      answer: "SECURIZE detects a comprehensive range of vulnerabilities including OWASP Top 10 issues, authentication flaws, authorization bypasses, injection attacks (SQL, XSS, Command Injection), insecure configurations, sensitive data exposure, API security issues, and business logic flaws. Our AI engine is continuously updated with the latest vulnerability patterns and attack techniques, ensuring you're protected against both known and emerging threats."
    }
  ];

  const toggleFAQ = (index: number) => {
    setOpenIndex(openIndex === index ? null : index);
  };

  return (
    <section className="relative overflow-hidden bg-black py-12 sm:py-16 lg:py-20">
      <div className="container mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
        <div className="grid grid-cols-1 lg:grid-cols-[auto,1fr] gap-8 lg:gap-12">
          {/* Left Section - Title and Graphic */}
          <div className="relative">
            {/* Gradient Accent Bar */}
            <div className="absolute left-0 top-0 bottom-0 w-0.5 bg-gradient-to-b from-lime-400 via-lime-500 to-lime-600 rounded-full"
              style={{
                boxShadow: '0 0 15px rgba(132, 204, 22, 0.4)'
              }}
            />
            
            {/* Title */}
            <h2 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6 pl-4">
              FAQ's
            </h2>

            {/* Large Question Mark Background Graphic */}
            <div className="absolute -left-8 -bottom-8 opacity-[0.03] pointer-events-none">
              <svg 
                width="300" 
                height="300" 
                viewBox="0 0 200 200" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="3"
                className="text-white"
              >
                {/* Question mark shape - curved top and dot bottom */}
                <path 
                  d="M100 40 C75 40, 55 60, 55 85 C55 105, 65 120, 80 130 C90 135, 95 140, 95 150" 
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <circle cx="100" cy="165" r="6" fill="currentColor" />
              </svg>
            </div>
          </div>

          {/* Right Section - FAQ Items */}
          <div className="space-y-0">
            {faqs.map((faq, index) => (
              <div
                key={index}
                className="border-b border-gray-800/50 last:border-b-0"
              >
                <button
                  onClick={() => toggleFAQ(index)}
                  className="w-full py-4 text-left flex items-center justify-between group hover:bg-gray-900/30 transition-colors duration-200"
                >
                  <span className="text-base sm:text-lg font-semibold text-white pr-6 group-hover:text-lime-400 transition-colors">
                    {faq.question}
                  </span>
                  <div className="flex-shrink-0">
                    <svg
                      className={`w-4 h-4 text-gray-400 group-hover:text-lime-400 transition-all duration-300 ${
                        openIndex === index ? 'transform rotate-180' : ''
                      }`}
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        d="M19 9l-7 7-7-7"
                      />
                    </svg>
                  </div>
              </button>
                <div
                  className={`overflow-hidden transition-all duration-300 ease-in-out ${
                    openIndex === index ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
                  }`}
                >
                  <div className="pb-4 pr-8">
                    <p className="text-sm sm:text-base text-gray-400 leading-relaxed">
                      {faq.answer}
                    </p>
                  </div>
                </div>
              </div>
            ))}
            </div>
        </div>
        </div>
      </section>
  );
}

const steps = [
  {
    icon: (props: any) => (
      <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
      </svg>
    ),
    title: 'Connect',
    description: 'Submit your target URL. Quick setup, no lengthy onboarding after verification.',
  },
  {
    icon: (props: any) => (
      <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    ),
    title: 'Authenticate',
    description: 'Provide test credentials for deeper coverage.',
  },
  {
    icon: (props: any) => (
      <svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
    ),
    title: 'Assess',
    description: 'Our AI engine runs thousands of checks, validated by our expert pentesters.',
  },
];

function HowItWorksSection() {
  const [currentIndex, setCurrentIndex] = useState(0);

  const goToPrevious = () => {
    setCurrentIndex((prevIndex) => (prevIndex === 0 ? steps.length - 1 : prevIndex - 1));
  };

  const goToNext = () => {
    setCurrentIndex((prevIndex) => (prevIndex === steps.length - 1 ? 0 : prevIndex + 1));
  };

  return (
    <section className="relative overflow-hidden bg-black py-20 sm:py-28 lg:py-32">
       <div className="absolute inset-0 opacity-10">
          <div className="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black"></div>
      </div>
      <div className="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 relative z-10">
        <div className="lg:grid lg:grid-cols-[auto,1fr] lg:gap-16 items-center">
          {/* Vertical Title for Desktop */}
          <div className="relative hidden lg:block self-stretch">
            <div className="absolute left-0 top-0 h-full w-px bg-lime-400/20"></div>
            <div className="absolute left-0 top-0 h-16 w-px bg-lime-400 animate-pulse"></div>
            <div className="flex h-full items-center">
              <h2 className="text-3xl sm:text-4xl lg:text-5xl font-bold text-white [writing-mode:vertical-rl] transform rotate-180 whitespace-nowrap py-8">
                How it Works
              </h2>
            </div>
          </div>

          <div>
            {/* Horizontal Title for Mobile */}
            <div className="lg:hidden text-left mb-12">
              <h2 className="text-3xl sm:text-4xl font-bold text-white">How it Works</h2>
              <div className="mt-2 h-1 w-16 bg-lime-400"></div>
            </div>

            <div className="overflow-hidden">
              <div className="flex transition-transform duration-500 ease-in-out" style={{ transform: `translateX(-${currentIndex * (100 / steps.length)}%)` }}>
                 {steps.map((step, index) => {
                  const isActive = index === currentIndex;
                  const StepIcon = step.icon;
                  return (
                    <div key={index} className="w-full flex-shrink-0" style={{ flexBasis: `${100 / steps.length}%` }}>
                      <div className="flex items-center gap-4 sm:gap-8 pr-8">
                        <div 
                          className={`text-[10rem] sm:text-[12rem] font-bold transition-colors duration-500 ${isActive ? 'text-lime-400' : 'text-gray-800'}`} 
                          style={{ lineHeight: 0.8 }}
                        >
                          0{index + 1}
                        </div>
                        <div className="relative w-full max-w-md">
                          <div 
                            className={`absolute -inset-px rounded-lg transition-opacity duration-500 ${isActive ? 'opacity-100 bg-gradient-to-r from-lime-400/50 to-gray-900/10' : 'opacity-0'}`}
                          ></div>
                          <div className="relative border border-gray-800/50 rounded-lg p-6 h-full">
                            <StepIcon className="w-8 h-8 text-lime-400 mb-4" />
                            <h3 className="text-xl sm:text-2xl font-bold text-white mb-2 text-left">{step.title}</h3>
                            <p className="text-gray-400 text-left leading-relaxed">{step.description}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
            
            <div className="mt-8 flex justify-start lg:justify-end gap-4">
              <button
                onClick={goToPrevious}
                className="w-12 h-12 flex items-center justify-center rounded-md border border-gray-800/50 text-gray-400 hover:bg-gray-800/50 hover:text-white transition-colors"
              >
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 19l-7-7 7-7" /></svg>
              </button>
              <button
                onClick={goToNext}
                className="w-12 h-12 flex items-center justify-center rounded-md border border-gray-800/50 text-gray-400 hover:bg-gray-800/50 hover:text-white transition-colors"
              >
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5l7 7-7 7" /></svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}
